
@{
    ViewBag.Name = "Index";
}



@using CreaDev.Framework.Core.Resources
@using GpuMiningInsights.Domain.Models
@using GpuMiningInsights.Web.Models.Search
@model CreaDev.Framework.Core.Models.SearchResult<GpuMiningInsights.Domain.Models.Brand>


<br />
<button type="button" class="btn green" onclick="showAddBrand()">
    @Common.Add
</button>

<br />
<br />
<div class="portlet light" id="brand-list-portlet">
    <div class="portlet-title">
        <div class="caption">
            <i class="icon-list"></i>
            <span class="caption-subject font-green bold uppercase">
                Brands
            </span>
        </div>
    </div>
    <div class="portlet-body form" id="form-portlet">
        <div class="portlet light bordered">
            <div class="portlet-title">
                <div class="caption font-green-sharp">
                    <i class="fa fa-search"></i>
                    <span class="caption-subject bold uppercase">
                        @Common.Search
                    </span>
                </div>

            </div>
            <div class="portlet-body form" >
                <br/>

                @using (Ajax.BeginForm("Search", new { }, new AjaxOptions()
                {
                    HttpMethod = "POST",
                    OnBegin = "block('#brand-list-portlet')",
                    OnComplete = "unblock('#brand-list-portlet')",
                    UpdateTargetId = "brand-list"
                }, new { id = "form-search",@class="auto-search" }))
                {
                    @Html.Partial("_SearchForm", new BrandSearchCrietriaViewModel())
                    <br />
                    <button type="submit" class="btn green btn-block">
                        @Common.Search
                    </button>
                }
            </div>
        </div>
        <br/>

        <div id="brand-list">
            @Html.Partial("_List")
        </div>
    </div>
</div>


<div class="modal fade"
     id="add-brand-modal"
     role="basic"
     tabindex="-1"
     aria-hidden="true">

    <div class="modal-dialog modal-lg">
        <div class="modal-content" id="add-brand-div">

            @using (Ajax.BeginForm("Add", "Brand", new { }, new AjaxOptions()
            {
                OnBegin = "block('#add-brand-div')",
                OnComplete = "onAjaxComplete(xhr, status, '#add-brand-div', '#add-brand-alert', '#brand-list')",
                OnFailure = "onAjaxFailed(xhr, status, error, '#add-brand-alert')",
                OnSuccess = "onAjaxSuccess(xhr, status, '#add-brand-modal')"
            }, new { id = "add-brand-form", @role = "form" }))
            {
                <div class="modal-header">
                    <button type="button" class="close" data-dismiss="modal" aria-hidden="true"></button>
                    <h4 class="modal-title">Add Brand</h4>
                </div>

                        <div class="modal-body">
                            <div id="add-brand-alert"></div>
                            @Html.Partial("_Form", new Brand())
                        </div>

                        <div class="modal-footer">
                            <button type="submit" class="btn green">
                                @Common.Add
                            </button>
                            <button type="button" data-dismiss="modal" class="btn red">
                                @Common.Cancel
                            </button>
                        </div>
            }
        </div>
    </div>
</div>



<div class="modal fade"
     id="edit-brand-modal"
     role="basic"
     tabindex="-1"
     aria-hidden="true">

    <div class="modal-dialog modal-lg">
        <div class="modal-content" id="edit-brand-div">

            @using (Ajax.BeginForm("Update", "Brand", new { }, new AjaxOptions()
            {
                OnBegin = "block('#edit-brand-div')",
                OnComplete = "onAjaxComplete(xhr, status, '#edit-brand-div', '#edit-brand-alert', '#brand-list')",
                OnFailure = "onAjaxFailed(xhr, status, error, '#edit-brand-alert')",
                OnSuccess = "onAjaxSuccess(xhr, status, '#edit-brand-modal')"
            }, new { id = "edit-brand-form", @role = "form" }))
            {
                <div class="modal-header">
                    <button type="button" class="close" data-dismiss="modal" aria-hidden="true"></button>
                    <h4 class="modal-title">@Common.Edit</h4>
                </div>

                <div class="modal-body">
                    <div id="edit-brand-alert"></div>

                    <div id="edit-brand-form-div">
                        @Html.Partial("_Form", new Brand())
                    </div>
                </div>

                        <div class="modal-footer">
                            <button type="submit" class="btn green">
                                @Common.Save
                            </button>
                            <button type="button" data-dismiss="modal" class="btn red">
                                @Common.Cancel
                            </button>
                        </div>
            }
        </div>
    </div>
</div>


<div class="modal fade"
     id="delete-brand-modal"
     role="basic"
     tabindex="-1"
     aria-hidden="true">

    <div class="modal-dialog modal-lg">
        <div class="modal-content" id="delete-brand-div">

            @using (Ajax.BeginForm("Delete", "Brand", new { }, new AjaxOptions()
            {
                OnBegin = "block('#delete-brand-div')",
                OnComplete = "onAjaxComplete(xhr, status, '#delete-brand-div', '#delete-brand-alert', '#brand-list')",
                OnFailure = "onAjaxFailed(xhr, status, error, '#delete-brand-alert')",
                OnSuccess = "onAjaxSuccess(xhr, status, '#delete-brand-modal')"
            }, new { id = "delete-brand-form", @role = "form" }))
            {
                <div class="modal-header">
                    <button type="button" class="close" data-dismiss="modal" aria-hidden="true"></button>
                    <h4 class="modal-title">@Common.AreYouSure</h4>
                </div>

                <div class="modal-body">
                    <div id="delete-brand-alert"></div>

                    <div id="delete-brand-form-div">
                        @Html.Partial("_DeleteForm", new Brand())
                    </div>
                </div>

                <div class="modal-footer">
                    <button type="submit" class="btn green">
                        @Common.Delete    
                    </button>
                    <button type="button" data-dismiss="modal" class="btn red">
                        @Common.Cancel
                    </button>
                </div>
            }
        </div>
    </div>
</div>



@section scripts{

    <script type="text/javascript">


        function showAddBrand() {

            $("#add-brand-modal").modal('show');
        }

        function showEditBrand() {

            $("#edit-brand-modal").modal('show');
        }

        function showDeleteBrand() {
            $("#delete-brand-alert").html('');
            $("#delete-brand-modal").modal('show');
        }
    </script>
}
